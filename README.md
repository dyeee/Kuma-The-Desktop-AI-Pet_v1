# 🧸 AI 桌面精靈 Kuma

歡迎使用 **Kuma**！Kuma 是一隻可愛的 AI 桌面熊，能陪伴你對話、記憶重要事項、提醒行程，並擁有獨特的個性！
![image](https://github.com/user-attachments/assets/e68223c9-bbbd-4c9b-809a-fa205e2c8426)


## ✨ 功能特色
- **互動對話**：與 Kuma 聊天，體驗有趣的對話。
- **本地AI**：可離線聊天，免費且無次數上限！
- **長期記憶**：讓 Kuma 幫你記錄重要資訊。
- **個性化設定**：自訂 Kuma 的語氣和行為，打造專屬的桌面夥伴！

## 🛠️ 技術架構
- **桌面應用**：C# WPF 開發，提供流暢的桌面體驗。
- **本地語言模型**：DeepSeek-R1 7B，支援高效的本地推論。
- **後端服務**：Docker 部署，包含 Ollama（語言模型推論）與 MongoDB（資料儲存）。

---

## 📦 安裝與啟動流程

### 1. 安裝 Docker Desktop
- 下載並安裝 [Docker Desktop](https://www.docker.com/products/docker-desktop/)。
- 確認 Docker 正常運行（Windows 右下角顯示小鯨魚圖示）。

### 2. 啟動後端服務（MongoDB + Ollama）
1. 打開終端機（Terminal / CMD / PowerShell）。
2. 進入專案的 `docker/` 資料夾：
   ```bash
   cd docker
   ```
3. 執行以下指令啟動服務：
   ```bash
   docker-compose --env-file .env up -d
   ```
   - 這會自動啟動 MongoDB 資料庫和 Ollama 語言模型推論服務。
   - 第一次啟動需下載 DeepSeek-R1 7B 模型（約數 GB），請耐心等待。

### 3. 啟動桌面精靈應用
- 後端服務啟動後，雙擊 `KumaDesktopPet.exe` 啟動 Kuma。
- Kuma 會自動連接到本機服務，開始與你互動！

---

## 🧠 長期記憶功能
Kuma 內建長期記憶功能，能儲存你標記的重要事項，並支援查詢、刪除與更新。所有記憶內容儲存在本地的 MongoDB 資料庫，確保資料隱私。以下是使用指令的詳細說明：

### 📌 標記重要事項
指令：重要、請記住 <內容>
用途：讓 Kuma 記錄重要資訊，儲存至長期記憶。
範例：
你：重要、請記住 明天上午10點與客戶開會
Kuma：好喔！已記住：明天上午10點與客戶開會。隨時問我吧！🐻

注意：請提供清晰的內容，方便 Kuma 儲存與檢索。

### 🗑️ 刪除重要事項
指令：刪除重要 <內容或關鍵字>
用途：從長期記憶中移除指定的重要事項。
範例：
你：刪除重要 明天上午10點與客戶開會
Kuma：已刪除「明天上午10點與客戶開會」的記憶！需要我幫忙確認其他事項嗎？😊

進階：可用關鍵字模糊匹配：

你：刪除重要 客戶開會
Kuma：已刪除包含「客戶開會」的記憶！要我列出剩餘記憶嗎？🐾

### 🔄 更新重要事項
指令：更新重要 <舊內容或關鍵字> 到 <新內容>
用途：修改已儲存的重要事項。
範例：
你：更新重要 明天上午10點與客戶開會 到 明天上午11點與客戶開會
Kuma：好的！已更新為：明天上午11點與客戶開會。還有什麼要調整？😄

注意：若有多條相似記憶，Kuma 會提示你確認。

### 🔍 查詢記憶
指令：列出重要事項 或 告訴我重要的事情
用途：顯示所有儲存的重要事項。
範例：
你：列出重要事項
Kuma：這是你標記的重要事項：
1. 明天上午11點與客戶開會
2. 下週提交專案報告
需要我幫你管理這些嗎？🐻

### 🛠️ 技術細節
儲存方式：重要事項儲存在 MongoDB 資料庫，與 Docker 部署的後端服務整合。
資料結構：
欄位：內容、時間戳記(開發中)、關鍵字標籤（自動生成）。
支援關鍵字檢索與模糊匹配。
本地推論：記憶處理由 DeepSeek-R1 7B 模型解析，全部在本地完成。
硬體建議：至少 16GB 記憶體，10GB 以上磁碟空間給本地語言模型。

---

## 📝 自訂 Kuma 個性
Kuma 的個性由專案根目錄下的 `initial_prompt.txt` 檔案定義。你可以：
- 修改語氣（例如：正式、可愛、調皮）。
- 設定回覆語言（中文、英文等）。
- 加入特定指令範例（例如：提醒、記筆記）。

**步驟**：
1. 編輯 `initial_prompt.txt`。
2. 儲存後重新啟動桌面應用，Kuma 將以新個性運作！

---

## 🛠️ 常見問題
| **問題** | **解決方式** |
|----------|--------------|
| `.exe` 連線失敗？ | 確認 Docker 是否運行（`docker ps`），並檢查 MongoDB 和 Ollama 是否成功啟動。 |
| Ollama 第一次啟動慢？ | 因下載 DeepSeek-R1 7B 模型，建議預先拉取模型（見進階）。 |
| Docker-compose 指令錯誤？ | 確認 Docker Desktop 是最新版本，且有執行權限。 |

---

## ⚡ 進階：加速模型下載
若想減少首次啟動時間，可預先拉取 DeepSeek-R1 7B 模型：
1. 單獨啟動 Ollama 服務：
   ```bash
   docker-compose up -d ollama
   ```
2. 進入 Ollama 容器並拉取模型：
   ```bash
   docker exec -it ollama ollama pull deepseek-r1:7b
   ```
   - 下次啟動時將直接使用已下載的模型。
  
或參考【奕昇AI學習平台】[建立私人本地 AI 資料庫](https://ainote.tw/how-to-install-deepseek-on-computer/)

---

## 🧹 停止服務
若需關閉後端服務，執行：
```bash
docker-compose down
```
- 這會停止並移除容器，資料仍保留在 Docker Volume 中。

---

## 📋 注意事項
- **硬體需求**：建議至少 16GB 記憶體以運行 DeepSeek-R1 7B。
- **桌面程式**：WPF 應用在 Windows 本機執行，不在 Docker 中。

---

## ⬆️ 未來版本更新:
- **通知提醒**：設定提醒，Kuma 會準時通知你。
- **API 整合**：Notion API、Google Calendar API 需額外設定（未來版本支援）。
- **動畫升級**：有更多表情與互動。

---

## 🏁 開始使用吧！
Kuma 期待成為你的學習與生活好夥伴！如果覺得有趣，歡迎分享給朋友！😊

有任何問題或建議，請在 [這裡](https://github.com/dyeee/Kuma-The-Desktop-AI-Pet_v1/issues) 告訴我！
